<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="/css/user.css">
	</head>
	<body>
		<div id="app">
			<div v-if="isOnline()" class="navigationbar" style="height: 80px;width: 100%;text-align: center;">
				<button onclick="changePassword()" style="height: 40px; width: 100px;">修改密码</button>
				<button onclick="showBills()" style="height: 40px; width: 100px;">我的订单</button>
				<button onclick="logOut()" style="height: 40px; width: 100px;">登出</button>
			</div>
			<div v-else class="navigationbar" style="height: 80px;width: 100%;text-align: center;">
				<button onclick="logIn()" style="height: 40px; width: 100px;">登录</button>
				<button onclick="registerAccount()" style="height: 40px; width: 100px;">注册</button>
			</div>
			<iframe frameborder="0" id="content" width="100%"></iframe>
		</div>
	</body>
	<script src="./js/vue.js"></script>
	<script>
		new Vue({
			el: '#app',
			data: {

			},
			methods: {
				isOnline: function(){
					return false;
				}
			}
		})
		class Bill{
			constructor(date, elec, price){
				this.date = date;
				this.elec = elec;
				this.price = price;
			}
		}
		function logIn(){
			loginPanel = document.getElementById("content");
			loginPanel.height = 180;
			text = `
			<div style="height: 240px; width: 500px;margin-left:38%;border-style:solid;background-color:white;">
				<div style="text-align: right; display: inline-block; width: 40%;">
					<p>账号</p>
				</div>
				<div style="text-align: left; display: inline-block; width: 40%;">
					<input id="username" type='text'></input>
				</div>
				<div style="text-align: right; display: inline-block; width: 40%;">
					<p>密码</p>
				</div>
				<div style="text-align: left; display: inline-block; width: 40%;">
					<input id="pw" type='password'></input>
				</div>
				<div style="text-align: center; width: 100%;">
					<button style="height: 40px; width: 100px;" onclick="submitLogin">提交</button>
				</div>
			</div>`;
			loginPanel.contentDocument.body.innerHTML = text;
		}
		function submitLogin(){
			username = document.getElementById("username").val;
			pw = document.getElementById("pw").val;
			
		}
		function registerAccount(){
			registerPanel = document.getElementById("content");
			registerPanel.height = 260;
			text = 	`
			<div style="height: 240px; width: 500px;margin-left:38%;border-style:solid;background-color:white;">
				<div style="text-align: right; display: inline-block; width: 40%;">
					<p>账号</p>
				</div>
				<div style="text-align: left; display: inline-block; width: 40%;">
					<input id="username" type='text'></input>
				</div>
				<div style="text-align: right; display: inline-block; width: 40%;">
					<p>密码</p>
				</div>
				<div style="text-align: left; display: inline-block; width: 40%;">
					<input id="pw" type='password'></input>
				</div>
				<div style="text-align: right; display: inline-block; width: 40%;">
					<p>确认输入密码</p>
				</div>
				<div style="text-align: left; display: inline-block; width: 40%;">
					<input id="pw_confirm" type='password'></input>
				</div>
				<div style="text-align: center; width: 100%;">
					<button style="height: 40px; width: 100px;" onclick="submitRegisterAccount">提交</button>
				</div>
			</div>`;
			registerPanel.contentDocument.body.innerHTML = text;
		}
		function submitRegisterAccount(){
			username = document.getElementById("username").val;
			pw = document.getElementById("pw").val;
			pw_confirm = document.getElementById("pw_confirm").val;
			
		}
		function changePassword() {
			pwPanel = document.getElementById("content");
			pwPanel.height = 260;
			text = 	`
			<div style="height: 240px; width: 500px;margin-left:38%;border-style:solid;background-color:white;">
				<div style="text-align: right; display: inline-block; width: 40%;">
					<p>密码</p>
				</div>
				<div style="text-align: left; display: inline-block; width: 40%;">
					<input id="oldpw" type='password'></input>
				</div>
				<div style="text-align: right; display: inline-block; width: 40%;">
					<p>新密码</p>
				</div>
				<div style="text-align: left; display: inline-block; width: 40%;">
					<input id="newpw" type='password'></input>
				</div>
				<div style="text-align: right; display: inline-block; width: 40%;">
					<p>确认输入新密码</p>
				</div>
				<div style="text-align: left; display: inline-block; width: 40%;">
					<input id="newpw_confirm" type='password'></input>
				</div>
				<div style="text-align: center; width: 100%;">
					<button style="height: 40px; width: 100px;" onclick="submitChangePassword">提交</button>
				</div>
			</div>`;
			pwPanel.contentDocument.body.innerHTML = text;
		}
		function submitChangePassword(){
			oldpw = document.getElementById("oldpw").val;
			newpw = document.getElementById("newpw").val;
			newpw_confirm = document.getElementById("newpw_confirm").val;

			if (newpw == newpw_confirm) {
				
			}
			else {

			}
		}
		function showBills() {
			billsPanel = document.getElementById("content");
			billsPanel.frameborder = "1";
			bills = [new Bill("2019-3-1 12:30", "45", "100"), new Bill("2019-3-1 12:30", "45", "100"), new Bill("2019-3-1 12:30", "45", "100")];
			tableHeight = bills.length * 40;
			billsPanel.height = tableHeight * 1.1;
			result = `<table border='1' width='100%'`;
			result += "<tr><th>时间</th><th>充电度数</th><th>金额</th></tr>"
			for (let index = 0; index < bills.length; index++) {
				bill = bills[index];
				result += `<tr><th>${bill.date}</th><th>${bill.elec}</th><th>${bill.price}</th></tr>`;
			}
			result += "</table>";
			billsPanel.contentDocument.body.innerHTML = result;
		}
		function logOut(){

		}
	</script>
</html>
