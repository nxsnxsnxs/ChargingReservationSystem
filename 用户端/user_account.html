<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="/css/user.css">
	</head>
	<body>
		<div id="app">
			<div class="navigationbar" style="height: 80px;width: 100%;text-align: center;">
				<button @click="showBills()" type="button" style="height: 40px; width: 100px;">我的订单</button>
				<button @click="logOut()" type="button" style="height: 40px; width: 100px;">登出</button>
			</div>
			<iframe frameborder="0" id="content" width="100%"></iframe>
		</div>
	</body>
	<script src="./js/vue.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script>
		var app = new Vue({
			el: '#app',
			data: {
				
			},
			methods: {
				showBills: function() {
					billsPanel = document.getElementById("content");
					billsPanel.frameborder = "1";
					bills = [new Bill("2019-3-1 12:30", "45", "100"), new Bill("2019-3-1 12:30", "45", "100"), new Bill("2019-3-1 12:30", "45", "100")];
					tableHeight = bills.length * 40;
					billsPanel.height = tableHeight * 1.1;
					result = `<table border='1' width='100%'`;
					result += "<tr><th>时间</th><th>充电度数</th><th>金额</th></tr>"
					for (let index = 0; index < bills.length; index++) {
						bill = bills[index];
						result += `<tr><th>${bill.date}</th><th>${bill.elec}</th><th>${bill.price}</th></tr>`;
					}
					result += "</table>";
					billsPanel.contentDocument.body.innerHTML = result;
				},
				logOut: function(){
					axios.put('http://127.0.0.1:4523/m1/1073322-0-default/logout').then(
						(res) => {
							if(res.code == 200)
							{
								window.location.href = "login.html";
							}
						}
					);
				}
			}
		})
		class Bill{
			constructor(date, elec, price){
				this.date = date;
				this.elec = elec;
				this.price = price;
			}
		}
	</script>
</html>
